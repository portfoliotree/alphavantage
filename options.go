// Code generated by av-generate; DO NOT EDIT.

package alphavantage

import (
	"context"
	"net/http"
	"net/url"
	"strconv"
)

type HistoricalOptionsQuery url.Values

func QueryHistoricalOptions(apiKey, symbol string) HistoricalOptionsQuery {
	return HistoricalOptionsQuery{"function": []string{"HISTORICAL_OPTIONS"}, "symbol": []string{symbol}, "apikey": []string{apiKey}}
}
func (query HistoricalOptionsQuery) Date(value string) HistoricalOptionsQuery {
	query["date"] = []string{value}
	return query
}
func (query HistoricalOptionsQuery) DataTypeCSV() HistoricalOptionsQuery {
	query["datatype"] = []string{"csv"}
	return query
}
func (query HistoricalOptionsQuery) DataTypeJSON() HistoricalOptionsQuery {
	query["datatype"] = []string{"json"}
	return query
}
func (query HistoricalOptionsQuery) DataType(value string) HistoricalOptionsQuery {
	query["datatype"] = []string{value}
	return query
}
func (client *Client) GetHistoricalOptions(ctx context.Context, q HistoricalOptionsQuery) (*http.Response, error) {
	req, err := client.newRequest(ctx, url.Values(q))
	if err != nil {
		return nil, err
	}
	res, err := client.Do(req)
	if err != nil {
		return nil, err
	}
	return res, nil
}

type HistoricalOptionsRow struct {
	ContractID        string `column-name:"contractID"`
	Symbol            string `column-name:"symbol"`
	Expiration        string `column-name:"expiration"`
	Strike            string `column-name:"strike"`
	Type              string `column-name:"type"`
	Last              string `column-name:"last"`
	Mark              string `column-name:"mark"`
	Bid               string `column-name:"bid"`
	BidSize           string `column-name:"bid_size"`
	Ask               string `column-name:"ask"`
	AskSize           string `column-name:"ask_size"`
	Volume            string `column-name:"volume"`
	OpenInterest      string `column-name:"open_interest"`
	Date              string `column-name:"date"`
	ImpliedVolatility string `column-name:"implied_volatility"`
	Delta             string `column-name:"delta"`
	Gamma             string `column-name:"gamma"`
	Theta             string `column-name:"theta"`
	Vega              string `column-name:"vega"`
	RHO               string `column-name:"rho"`
}

func (client *Client) GetHistoricalOptionsCSVRows(ctx context.Context, q HistoricalOptionsQuery) ([]HistoricalOptionsRow, error) {
	q.DataTypeCSV()
	res, err := client.GetHistoricalOptions(ctx, q)
	if err != nil {
		return nil, err
	}
	defer res.Body.Close()
	var rows []HistoricalOptionsRow
	err = ParseCSV(res.Body, &rows, nil)
	if err != nil {
		return nil, err
	}
	return rows, nil
}

type RealtimeOptionsQuery url.Values

func QueryRealtimeOptions(apiKey, symbol string) RealtimeOptionsQuery {
	return RealtimeOptionsQuery{"function": []string{"REALTIME_OPTIONS"}, "symbol": []string{symbol}, "apikey": []string{apiKey}}
}
func (query RealtimeOptionsQuery) RequireGreeks(value bool) RealtimeOptionsQuery {
	query["require_greeks"] = []string{strconv.FormatBool(value)}
	return query
}
func (query RealtimeOptionsQuery) Contract(value string) RealtimeOptionsQuery {
	query["contract"] = []string{value}
	return query
}
func (query RealtimeOptionsQuery) DataTypeCSV() RealtimeOptionsQuery {
	query["datatype"] = []string{"csv"}
	return query
}
func (query RealtimeOptionsQuery) DataTypeJSON() RealtimeOptionsQuery {
	query["datatype"] = []string{"json"}
	return query
}
func (query RealtimeOptionsQuery) DataType(value string) RealtimeOptionsQuery {
	query["datatype"] = []string{value}
	return query
}
func (client *Client) GetRealtimeOptions(ctx context.Context, q RealtimeOptionsQuery) (*http.Response, error) {
	req, err := client.newRequest(ctx, url.Values(q))
	if err != nil {
		return nil, err
	}
	res, err := client.Do(req)
	if err != nil {
		return nil, err
	}
	return res, nil
}
